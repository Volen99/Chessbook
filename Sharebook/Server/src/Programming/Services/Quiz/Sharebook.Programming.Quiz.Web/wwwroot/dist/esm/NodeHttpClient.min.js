/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@microsoft/signalr@3.1.3/dist/esm/NodeHttpClient.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var requestModule,__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),__assign=this&&this.__assign||Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};import{AbortError,HttpError,TimeoutError}from"./Errors";import{HttpClient,HttpResponse}from"./HttpClient";import{LogLevel}from"./ILogger";import{isArrayBuffer}from"./Utils";if("undefined"==typeof XMLHttpRequest){var requireFunc="function"==typeof __webpack_require__?__non_webpack_require__:require;requestModule=requireFunc("request")}var NodeHttpClient=function(e){function t(t){var r=e.call(this)||this;if(void 0===requestModule)throw new Error("The 'request' module could not be loaded.");return r.logger=t,r.cookieJar=requestModule.jar(),r.request=requestModule.defaults({jar:r.cookieJar}),r}return __extends(t,e),t.prototype.send=function(e){var t=this;return new Promise(function(r,o){var n;n=isArrayBuffer(e.content)?Buffer.from(e.content):e.content||"";var i=t.request(e.url,{body:n,encoding:"arraybuffer"===e.responseType?null:"utf8",headers:__assign({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,timeout:e.timeout},function(n,i,u){if(e.abortSignal&&(e.abortSignal.onabort=null),n)return"ETIMEDOUT"===n.code&&(t.logger.log(LogLevel.Warning,"Timeout from HTTP request."),o(new TimeoutError)),t.logger.log(LogLevel.Warning,"Error from HTTP request. "+n),void o(n);i.statusCode>=200&&i.statusCode<300?r(new HttpResponse(i.statusCode,i.statusMessage||"",u)):o(new HttpError(i.statusMessage||"",i.statusCode||0))});e.abortSignal&&(e.abortSignal.onabort=function(){i.abort(),o(new AbortError)})})},t.prototype.getCookieString=function(e){return this.cookieJar.getCookieString(e)},t}(HttpClient);export{NodeHttpClient};
//# sourceMappingURL=/sm/89b81c5e4c391f5ab2f4324b461d0508477ccaac1adb2027309bb1a58f6f5f54.map